import { Meteor } from 'meteor/meteor';
export const iframeEntrypointText = atob(`
Y29uc3Qgb3JpZ2luYWxGZXRjaD1nbG9iYWxUaGlzLmZldGNoO2NvbnN0IGZldGNoUHJvdG9jb2xzPW5ldyBNYXA7Z2xvYmFsVGhp
cy5mZXRjaD1hc3luYyhyZXEsb3B0cyk9Pntjb25zdCB1cmw9bmV3IFVSTChyZXEgaW5zdGFuY2VvZiBSZXF1ZXN0P3JlcS51cmw6
cmVxLnRvU3RyaW5nKCkpO2NvbnNvbGUuZGVidWcoImZldGNoIHRvIix1cmwucHJvdG9jb2wpO2NvbnN0IGhhbmRsZXI9ZmV0Y2hQ
cm90b2NvbHMuZ2V0KHVybC5wcm90b2NvbCl8fG9yaWdpbmFsRmV0Y2g7cmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLG9wdHMpfTtn
bG9iYWxUaGlzLkRpc3RBcHA9Y2xhc3MgRGlzdEFwcHtzdGF0aWMgYXN5bmMgY29ubmVjdCgpe2NvbnN0IHBvcnQ9YXdhaXQgcmVj
ZWl2ZU1lc3NhZ2VQb3J0KCk7cmV0dXJuIG5ldyBEaXN0QXBwKHBvcnQpfWhhbmRsZU1lc3NhZ2UoZXZ0KXtjb25zdCBlbnRpdHk9
ZXZ0LmRhdGE7aWYoZW50aXR5LmtpbmQ9PSJGZXRjaFJlc3BvbnNlIil7Y29uc3QgcGFpcj10aGlzLnByb21pc2VzLmdldChlbnRp
dHkub3JpZ0lkKTtpZihwYWlyKXt0aGlzLnByb21pc2VzLmRlbGV0ZShlbnRpdHkub3JpZ0lkKTtwYWlyWzBdKGVudGl0eSk7cmV0
dXJufX1pZihlbnRpdHkua2luZD09IkZldGNoRXJyb3IiKXtjb25zdCBwYWlyMT10aGlzLnByb21pc2VzLmdldChlbnRpdHkub3Jp
Z0lkKTtpZihwYWlyMSl7dGhpcy5wcm9taXNlcy5kZWxldGUoZW50aXR5Lm9yaWdJZCk7cGFpcjFbMV0obmV3IEVycm9yKGVudGl0
eS5zcGVjLm1lc3NhZ2UpKTtyZXR1cm59fWNvbnNvbGUud2FybigiVE9ETzogRGlzdEFwcCByZWNlaXZlZDoiLGV2dC5kYXRhKX1h
c3luYyBoYW5kbGVFcnJvcihlcnIpe2NvbnN0e25hbWUsbWVzc2FnZSxzdGFja309ZXJyO3RoaXMuc2VuZFJwYyh7a2luZDoiV3Jp
dGVEZWJ1Z0V2ZW50IixzcGVjOnt0aW1lc3RhbXA6bmV3IERhdGUsbGV2ZWw6ImVycm9yIix0ZXh0OmBVbmNhdWdodCAke25hbWV9
IGluIHBhZ2VgLGVycm9yOntuYW1lLG1lc3NhZ2Usc3RhY2t9fX0pfWFzeW5jIGZldGNoKHJlcSxvcHRzKXtpZih0eXBlb2YgcmVx
PT0ic3RyaW5nIil7cmV0dXJuIGF3YWl0IHRoaXMuaGFuZGxlRmV0Y2goe21ldGhvZDpvcHRzPy5tZXRob2R8fCJHRVQiLHVybDpy
ZXEsaGVhZGVyczpuZXcgSGVhZGVycyhvcHRzPy5oZWFkZXJzKSxib2R5Om9wdHM/LmJvZHkhPW51bGw/YXdhaXQgbmV3IFJlc3Bv
bnNlKG9wdHMuYm9keSkudGV4dCgpOm51bGx9KX1jb25zdCByZXF1ZXN0PW5ldyBSZXF1ZXN0KHJlcSxvcHRzKTtyZXR1cm4gYXdh
aXQgdGhpcy5oYW5kbGVGZXRjaCh7bWV0aG9kOnJlcXVlc3QubWV0aG9kLHVybDpyZXF1ZXN0LnVybCxoZWFkZXJzOnJlcXVlc3Qu
aGVhZGVycyxib2R5OmF3YWl0IHJlcXVlc3QudGV4dCgpfHxudWxsfSl9YXN5bmMgaGFuZGxlRmV0Y2gocmVxdWVzdCl7Y29uc3Qg
cmVzcFBheWxvYWQ9YXdhaXQgdGhpcy5zZW5kUnBjRm9yUmVzdWx0KHtraW5kOiJGZXRjaFJlcXVlc3QiLGlkOi0xLHNwZWM6e3Vy
bDpyZXF1ZXN0LnVybCxtZXRob2Q6cmVxdWVzdC5tZXRob2QsaGVhZGVyczpBcnJheS5mcm9tKHJlcXVlc3QuaGVhZGVycyksYm9k
eTpyZXF1ZXN0LmJvZHk/P3VuZGVmaW5lZH19KTtpZihyZXNwUGF5bG9hZC5zcGVjLmJvZHlTdHJlYW0hPW51bGwpdGhyb3cgbmV3
IEVycm9yKGBUT0RPOiBzdHJlYW1gKTtyZXR1cm4gbmV3IFJlc3BvbnNlKHJlc3BQYXlsb2FkLnNwZWMuYm9keXx8bnVsbCx7c3Rh
dHVzOnJlc3BQYXlsb2FkLnNwZWMuc3RhdHVzLGhlYWRlcnM6bmV3IEhlYWRlcnMocmVzcFBheWxvYWQuc3BlYy5oZWFkZXJzPz9b
XSl9KX11c2VWdWVTdGF0ZShrZXksaW5pdGlhbCl7Y29uc29sZS5sb2coIlRPRE86IHVzZVZ1ZVN0YXRlIixrZXksaW5pdGlhbCk7
cmV0dXJuIGluaXRpYWx9cmVwb3J0UmVhZHkoKXt0aGlzLnNlbmRScGMoe2tpbmQ6IkxpZmVjeWNsZSIsc3BlYzp7c3RhZ2U6InJl
YWR5In19KX1sYXVuY2hJbnRlbnQoaW50ZW50KXt0aGlzLnNlbmRScGMoe2tpbmQ6IkxhdW5jaEludGVudCIsc3BlYzppbnRlbnR9
KX1zZW5kUnBjKGRhdGEpe3RoaXMucG9ydC5wb3N0TWVzc2FnZShkYXRhKX1zZW5kUnBjRm9yUmVzdWx0KGRhdGEpe2NvbnN0IHBy
b21pc2VOdW09dGhpcy5uZXh0UHJvbWlzZSsrO3JldHVybiBuZXcgUHJvbWlzZSgob2ssZmFpbCk9Pnt0aGlzLnNlbmRScGMoey4u
LmRhdGEsaWQ6cHJvbWlzZU51bX0pO3RoaXMucHJvbWlzZXMuc2V0KHByb21pc2VOdW0sW3ZhbHVlPT5vayh2YWx1ZSksZXJyb3I9
PmZhaWwoZXJyb3IpLF0pfSl9Y29uc3RydWN0b3IocG9ydCl7dGhpcy5wb3J0PXBvcnQ7dGhpcy5uZXh0UHJvbWlzZT0wO3RoaXMu
cHJvbWlzZXM9bmV3IE1hcDtwb3J0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGV2dD0+dGhpcy5oYW5kbGVNZXNzYWdlKGV2
dCkpO3BvcnQuc3RhcnQoKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGV2dD0+dGhpcy5oYW5kbGVFcnJvcihldnQu
ZXJyb3IpLmNhdGNoKGVycj0+Y29uc29sZS5lcnJvcihlcnIpKSk7ZmV0Y2hQcm90b2NvbHMuc2V0KCJkaXN0LWFwcDoiLChpbnB1
dCxpbml0KT0+dGhpcy5mZXRjaChpbnB1dCxpbml0KSl9fTtmdW5jdGlvbiByZWNlaXZlTWVzc2FnZVBvcnQoKXtyZXR1cm4gbmV3
IFByb21pc2UoKG9rLHJlamVjdCk9PntmdW5jdGlvbiBoYW5kbGVFdmVudChldmVudCl7aWYoZXZlbnQub3JpZ2luIT09IntPUklH
SU59IilyZXR1cm47aWYodHlwZW9mIGV2ZW50LmRhdGEhPT0ib2JqZWN0Inx8IWV2ZW50LmRhdGEpcmV0dXJuO2lmKHR5cGVvZiBl
dmVudC5kYXRhLnByb3RvY29sIT09InN0cmluZyIpcmV0dXJuO3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixo
YW5kbGVFdmVudCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCgpPT57Y29uc29sZS5lcnJvcigiUmVjZWl2ZWQg
YSBzZWNvbmQgcHJvdG9jb2wgaW5pdGlhdGlvbj8/IFJlbG9hZGluZyIpO3RyeXtjb25zdCBlbnRpdHk9e2tpbmQ6IkxpZmVjeWNs
ZSIsc3BlYzp7c3RhZ2U6InJlY3ljbGUifX07ZXZlbnQucG9ydHM/Lm1hcChwb3J0PT5wb3J0LnBvc3RNZXNzYWdlKGVudGl0eSkp
Pz9bXTtpZihwb3J0KXJlamVjdChuZXcgRXJyb3IoIlJlY2VpdmVkIHByb3RvY29sIHBhY2tldCB3aXRob3V0IGEgcG9ydCIpKX1m
aW5hbGx5e3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX19LGZhbHNlKTtpZihldmVudC5kYXRhLnByb3RvY29sIT09InByb3RvY29s
LmRpc3QuYXBwL3YxYWxwaGExIilyZWplY3QobmV3IEVycm9yKCJSZWNlaXZlZCB1bmV4cGVjdGVkIHByb3RvY29sICIrZXZlbnQu
ZGF0YS5wcm90b2NvbCkpO2NvbnN0W3BvcnRdPWV2ZW50LnBvcnRzPz9bXTtpZighcG9ydClyZWplY3QobmV3IEVycm9yKCJSZWNl
aXZlZCBwcm90b2NvbCBwYWNrZXQgd2l0aG91dCBhIHBvcnQiKSk7b2socG9ydCl9d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1l
c3NhZ2UiLGhhbmRsZUV2ZW50LGZhbHNlKX0pfWV4cG9ydHt9Cgo=
`);
export const iframeEntrypointBlob = new Blob([
  iframeEntrypointText.replace('{ORIGIN}', new URL(Meteor.absoluteUrl()).origin),
], {type: 'text/javascript'});
export const iframeEntrypointUrl = URL.createObjectURL(iframeEntrypointBlob);
