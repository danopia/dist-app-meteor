import { Meteor } from 'meteor/meteor';
export const iframeEntrypointText = atob(`
Y29uc3Qgb3JpZ2luYWxGZXRjaD1nbG9iYWxUaGlzLmZldGNoO2NvbnN0IGZldGNoUHJvdG9jb2xzPW5ldyBNYXA7Z2xvYmFsVGhp
cy5mZXRjaD1hc3luYyhyZXEsb3B0cyk9Pntjb25zdCB1cmw9bmV3IFVSTChyZXEgaW5zdGFuY2VvZiBSZXF1ZXN0P3JlcS51cmw6
cmVxLnRvU3RyaW5nKCkpO2NvbnNvbGUuZGVidWcoImZldGNoIHRvIix1cmwucHJvdG9jb2wpO2NvbnN0IGhhbmRsZXI9ZmV0Y2hQ
cm90b2NvbHMuZ2V0KHVybC5wcm90b2NvbCl8fG9yaWdpbmFsRmV0Y2g7cmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLG9wdHMpfTtn
bG9iYWxUaGlzLkRpc3RBcHA9Y2xhc3MgRGlzdEFwcHtzdGF0aWMgYXN5bmMgY29ubmVjdCgpe2NvbnN0IHBvcnQ9YXdhaXQgcmVj
ZWl2ZU1lc3NhZ2VQb3J0KCk7cmV0dXJuIG5ldyBEaXN0QXBwKHBvcnQpfWhhbmRsZU1lc3NhZ2UoZXZ0KXtjb25zdCBlbnRpdHk9
ZXZ0LmRhdGE7aWYoZW50aXR5LmtpbmQ9PSJGZXRjaFJlc3BvbnNlIil7Y29uc3QgcGFpcj10aGlzLnByb21pc2VzLmdldChlbnRp
dHkub3JpZ0lkKTtpZihwYWlyKXt0aGlzLnByb21pc2VzLmRlbGV0ZShlbnRpdHkub3JpZ0lkKTtwYWlyWzBdKGVudGl0eSk7cmV0
dXJufX1pZihlbnRpdHkua2luZD09IkZldGNoRXJyb3IiKXtjb25zdCBwYWlyMT10aGlzLnByb21pc2VzLmdldChlbnRpdHkub3Jp
Z0lkKTtpZihwYWlyMSl7dGhpcy5wcm9taXNlcy5kZWxldGUoZW50aXR5Lm9yaWdJZCk7cGFpcjFbMV0obmV3IEVycm9yKGVudGl0
eS5zcGVjLm1lc3NhZ2UpKTtyZXR1cm59fWNvbnNvbGUud2FybigiVE9ETzogRGlzdEFwcCByZWNlaXZlZDoiLGV2dC5kYXRhKX1h
c3luYyBmZXRjaChyZXEsb3B0cyl7aWYodHlwZW9mIHJlcT09InN0cmluZyIpe3JldHVybiBhd2FpdCB0aGlzLmhhbmRsZUZldGNo
KHttZXRob2Q6b3B0cz8ubWV0aG9kfHwiR0VUIix1cmw6cmVxLGhlYWRlcnM6bmV3IEhlYWRlcnMob3B0cz8uaGVhZGVycyksYm9k
eTpvcHRzPy5ib2R5IT1udWxsP2F3YWl0IG5ldyBSZXNwb25zZShvcHRzLmJvZHkpLnRleHQoKTpudWxsfSl9Y29uc3QgcmVxdWVz
dD1uZXcgUmVxdWVzdChyZXEsb3B0cyk7cmV0dXJuIGF3YWl0IHRoaXMuaGFuZGxlRmV0Y2goe21ldGhvZDpyZXF1ZXN0Lm1ldGhv
ZCx1cmw6cmVxdWVzdC51cmwsaGVhZGVyczpyZXF1ZXN0LmhlYWRlcnMsYm9keTphd2FpdCByZXF1ZXN0LnRleHQoKXx8bnVsbH0p
fWFzeW5jIGhhbmRsZUZldGNoKHJlcXVlc3Qpe2NvbnN0IHJlc3BQYXlsb2FkPWF3YWl0IHRoaXMuc2VuZFJwY0ZvclJlc3VsdCh7
a2luZDoiRmV0Y2hSZXF1ZXN0IixpZDotMSxzcGVjOnt1cmw6cmVxdWVzdC51cmwsbWV0aG9kOnJlcXVlc3QubWV0aG9kLGhlYWRl
cnM6QXJyYXkuZnJvbShyZXF1ZXN0LmhlYWRlcnMpLGJvZHk6cmVxdWVzdC5ib2R5Pz91bmRlZmluZWR9fSk7aWYocmVzcFBheWxv
YWQuc3BlYy5ib2R5U3RyZWFtIT1udWxsKXRocm93IG5ldyBFcnJvcihgVE9ETzogc3RyZWFtYCk7cmV0dXJuIG5ldyBSZXNwb25z
ZShyZXNwUGF5bG9hZC5zcGVjLmJvZHkse3N0YXR1czpyZXNwUGF5bG9hZC5zcGVjLnN0YXR1cyxoZWFkZXJzOm5ldyBIZWFkZXJz
KHJlc3BQYXlsb2FkLnNwZWMuaGVhZGVycz8/W10pfSl9dXNlVnVlU3RhdGUoa2V5LGluaXRpYWwpe2NvbnNvbGUubG9nKCJUT0RP
OiB1c2VWdWVTdGF0ZSIsa2V5LGluaXRpYWwpO3JldHVybiBpbml0aWFsfXJlcG9ydFJlYWR5KCl7dGhpcy5zZW5kUnBjKHtraW5k
OiJMaWZlY3ljbGUiLHNwZWM6e3N0YWdlOiJyZWFkeSJ9fSl9bGF1bmNoSW50ZW50KGludGVudCl7dGhpcy5zZW5kUnBjKHtraW5k
OiJMYXVuY2hJbnRlbnQiLHNwZWM6aW50ZW50fSl9c2VuZFJwYyhkYXRhKXt0aGlzLnBvcnQucG9zdE1lc3NhZ2UoZGF0YSl9c2Vu
ZFJwY0ZvclJlc3VsdChkYXRhKXtjb25zdCBwcm9taXNlTnVtPXRoaXMubmV4dFByb21pc2UrKztyZXR1cm4gbmV3IFByb21pc2Uo
KG9rLGZhaWwpPT57dGhpcy5zZW5kUnBjKHsuLi5kYXRhLGlkOnByb21pc2VOdW19KTt0aGlzLnByb21pc2VzLnNldChwcm9taXNl
TnVtLFt2YWx1ZT0+b2sodmFsdWUpLGVycm9yPT5mYWlsKGVycm9yKSxdKX0pfWNvbnN0cnVjdG9yKHBvcnQpe3RoaXMucG9ydD1w
b3J0O3RoaXMubmV4dFByb21pc2U9MDt0aGlzLnByb21pc2VzPW5ldyBNYXA7cG9ydC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdl
IixldnQ9PnRoaXMuaGFuZGxlTWVzc2FnZShldnQpKTtwb3J0LnN0YXJ0KCk7ZmV0Y2hQcm90b2NvbHMuc2V0KCJkaXN0LWFwcDoi
LChpbnB1dCxpbml0KT0+dGhpcy5mZXRjaChpbnB1dCxpbml0KSl9fTtmdW5jdGlvbiByZWNlaXZlTWVzc2FnZVBvcnQoKXtyZXR1
cm4gbmV3IFByb21pc2UoKG9rLHJlamVjdCk9PntmdW5jdGlvbiBoYW5kbGVFdmVudChldmVudCl7aWYoZXZlbnQub3JpZ2luIT09
IntPUklHSU59IilyZXR1cm47aWYodHlwZW9mIGV2ZW50LmRhdGEhPT0ib2JqZWN0Inx8IWV2ZW50LmRhdGEpcmV0dXJuO2lmKHR5
cGVvZiBldmVudC5kYXRhLnByb3RvY29sIT09InN0cmluZyIpcmV0dXJuO3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNz
YWdlIixoYW5kbGVFdmVudCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCgpPT57Y29uc29sZS5lcnJvcigiUmVj
ZWl2ZWQgYSBzZWNvbmQgcHJvdG9jb2wgaW5pdGlhdGlvbj8/IFJlbG9hZGluZyIpO3RyeXtjb25zdCBlbnRpdHk9e2tpbmQ6Ikxp
ZmVjeWNsZSIsc3BlYzp7c3RhZ2U6InJlY3ljbGUifX07ZXZlbnQucG9ydHM/Lm1hcChwb3J0PT5wb3J0LnBvc3RNZXNzYWdlKGVu
dGl0eSkpPz9bXTtpZihwb3J0KXJlamVjdChuZXcgRXJyb3IoIlJlY2VpdmVkIHByb3RvY29sIHBhY2tldCB3aXRob3V0IGEgcG9y
dCIpKX1maW5hbGx5e3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX19LGZhbHNlKTtpZihldmVudC5kYXRhLnByb3RvY29sIT09InBy
b3RvY29sLmRpc3QuYXBwL3YxYWxwaGExIilyZWplY3QobmV3IEVycm9yKCJSZWNlaXZlZCB1bmV4cGVjdGVkIHByb3RvY29sICIr
ZXZlbnQuZGF0YS5wcm90b2NvbCkpO2NvbnN0W3BvcnRdPWV2ZW50LnBvcnRzPz9bXTtpZighcG9ydClyZWplY3QobmV3IEVycm9y
KCJSZWNlaXZlZCBwcm90b2NvbCBwYWNrZXQgd2l0aG91dCBhIHBvcnQiKSk7b2socG9ydCl9d2luZG93LmFkZEV2ZW50TGlzdGVu
ZXIoIm1lc3NhZ2UiLGhhbmRsZUV2ZW50LGZhbHNlKX0pfWV4cG9ydHt9Cgo=
`);
export const iframeEntrypointBlob = new Blob([
  iframeEntrypointText.replace('{ORIGIN}', new URL(Meteor.absoluteUrl()).origin),
], {type: 'text/javascript'});
export const iframeEntrypointUrl = URL.createObjectURL(iframeEntrypointBlob);
