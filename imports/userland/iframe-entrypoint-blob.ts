export const iframeEntrypoint = atob('Y29uc3Qgb3JpZ2luYWxGZXRjaCA9IGdsb2JhbFRoaXMuZmV0Y2g7CmNvbnN0IGZldGNoUHJvdG9jb2xzID0gbmV3IE1hcCgpOwpnbG9iYWxUaGlzLmZldGNoID0gYXN5bmMgKHJlcSwgb3B0cykgPT4gewogICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEgaW5zdGFuY2VvZiBSZXF1ZXN0ID8gcmVxLnVybCA6IHJlcS50b1N0cmluZygpKTsKICAgIGNvbnNvbGUuZGVidWcoJ2ZldGNoIHRvJywgdXJsLnByb3RvY29sKTsKICAgIGNvbnN0IGhhbmRsZXIgPSBmZXRjaFByb3RvY29scy5nZXQodXJsLnByb3RvY29sKSB8fCBvcmlnaW5hbEZldGNoOwogICAgcmV0dXJuIGF3YWl0IGhhbmRsZXIocmVxLCBvcHRzKTsKfTsKZ2xvYmFsVGhpcy5EaXN0QXBwID0gY2xhc3MgRGlzdEFwcCB7CiAgICAvLyBwcml2YXRlIHJlYWRvbmx5IHByb21pc2VzID0gbmV3IE1hcDxzdHJpbmcsIFsoKSA9PiB2b2lkLCAoKSA9PiB2b2lkXT4oKTsKICAgIGNvbnN0cnVjdG9yKHBvcnQpIHsKICAgICAgICB0aGlzLnBvcnQgPSBwb3J0OwogICAgICAgIC8vIEhvb2sgdXAgc29tZSBoYW5kbGVyczoKICAgICAgICBwb3J0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBldnQgPT4gdGhpcwogICAgICAgICAgICAuaGFuZGxlTWVzc2FnZShldnQpKTsKICAgICAgICBmZXRjaFByb3RvY29scy5zZXQoJ3dlYi1kaXN0LWFwcDonLCAoaW5wdXQsIGluaXQpID0+IHRoaXMKICAgICAgICAgICAgLmhhbmRsZUZldGNoKG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KSkpOwogICAgfQogICAgc3RhdGljIGFzeW5jIGNvbm5lY3QoKSB7CiAgICAgICAgY29uc3QgcG9ydCA9IGF3YWl0IHJlY2VpdmVNZXNzYWdlUG9ydCgpOwogICAgICAgIHJldHVybiBuZXcgRGlzdEFwcChwb3J0KTsKICAgIH0KICAgIGhhbmRsZU1lc3NhZ2UoZXZ0KSB7CiAgICAgICAgY29uc29sZS53YXJuKCdUT0RPOiBEaXN0QXBwIHJlY2VpdmVkOicsIGV2dC5kYXRhKTsKICAgIH0KICAgIGFzeW5jIGhhbmRsZUZldGNoKHJlcXVlc3QpIHsKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgICB1cmw6IHJlcXVlc3QudXJsLAogICAgICAgICAgICBtZXRob2Q6IHJlcXVlc3QubWV0aG9kLAogICAgICAgICAgICBoZWFkZXJzOiBBcnJheS5mcm9tKHJlcXVlc3QuaGVhZGVycyksCiAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcXVlc3QudGV4dCgpLAogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2coJ2ZldGNoIHBheWxvYWQnLCBwYXlsb2FkKTsKICAgICAgICB0aGlzLnNlbmRScGMoewogICAgICAgICAgICBycGM6ICdmZXRjaCcsCiAgICAgICAgICAgIHNwZWM6IHBheWxvYWQsCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS53YXJuKCdUT0RPOiByZXR1cm5pbmcgSFRUUCA1MDAnKTsKICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdUT0RPJywgeyBzdGF0dXM6IDUwMCB9KTsKICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoIlRPRE8iKTsKICAgIH0KICAgIHVzZVZ1ZVN0YXRlKGtleSwgaW5pdGlhbCkgewogICAgICAgIGNvbnNvbGUubG9nKCJUT0RPOiB1c2VWdWVTdGF0ZSIsIGtleSwgaW5pdGlhbCk7CiAgICAgICAgcmV0dXJuIGluaXRpYWw7CiAgICB9CiAgICByZXBvcnRSZWFkeSgpIHsKICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoeyBycGM6ICdyZXBvcnRSZWFkeScgfSk7CiAgICB9CiAgICBzZW5kUnBjKGRhdGEpIHsKICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UoZGF0YSk7CiAgICB9Cn07CmZ1bmN0aW9uIHJlY2VpdmVNZXNzYWdlUG9ydCgpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgob2ssIHJlamVjdCkgPT4gewogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW4gIT09ICJ7T1JJR0lOfSIpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YSAhPT0gJ29iamVjdCcgfHwgIWV2ZW50LmRhdGEpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YS5wcm90b2NvbCAhPT0gJ3N0cmluZycpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgaGFuZGxlRXZlbnQpOwogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlJlY2VpdmVkIGEgc2Vjb25kIHByb3RvY29sIGluaXRpYXRpb24/PyBSZWxvYWRpbmciKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucG9ydHM/Lm1hcChwb3J0ID0+IHBvcnQucG9zdE1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBycGM6ICdyZWN5Y2xlLWZyYW1lJywKICAgICAgICAgICAgICAgICAgICB9KSkgPz8gW107CiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcnQpCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoIlJlY2VpdmVkIHByb3RvY29sIHBhY2tldCB3aXRob3V0IGEgcG9ydCIpKTsKICAgICAgICAgICAgICAgICAgICBvayhwb3J0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZmFsc2UpOwogICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5wcm90b2NvbCAhPT0gJ3Byb3RvY29sLmRpc3QuYXBwL3YxYWxwaGExJykKICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoIlJlY2VpdmVkIHVuZXhwZWN0ZWQgcHJvdG9jb2wgIiArIGV2ZW50LmRhdGEucHJvdG9jb2wpKTsKICAgICAgICAgICAgY29uc3QgW3BvcnRdID0gZXZlbnQucG9ydHMgPz8gW107CiAgICAgICAgICAgIGlmICghcG9ydCkKICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoIlJlY2VpdmVkIHByb3RvY29sIHBhY2tldCB3aXRob3V0IGEgcG9ydCIpKTsKICAgICAgICAgICAgb2socG9ydCk7CiAgICAgICAgfQogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgaGFuZGxlRXZlbnQsIGZhbHNlKTsKICAgIH0pOwp9Cg==');
